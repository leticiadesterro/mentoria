<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PLANEJAMENTO 2026</title>

<style>

body{
font-family:Arial, sans-serif;
margin:20px;
background:#f4f6f9;
}

h1{text-align:center;}

input,button{
padding:14px;
font-size:18px;
margin:8px 0;
width:100%;
border-radius:8px;
border:1px solid #ccc;
box-sizing:border-box;
}

button{
background:linear-gradient(135deg,#6366F1,#4F46E5);
color:white;
border:none;
font-weight:bold;
cursor:pointer;
transition:0.25s;
}

button:hover{
transform:translateY(-2px);
box-shadow:0 6px 14px rgba(79,70,229,0.25);
}

.card{
background:white;
padding:18px;
margin:15px 0;
border-radius:12px;
box-shadow:0 4px 12px rgba(0,0,0,0.1);
}

.card.finalizado{
background:#ECFDF5;
color:#065F46;
border-left:8px solid #10B981;
}

.fix{border-left:8px solid #e74c3c;}
.r7{border-left:8px solid #f39c12;}
.r15{border-left:8px solid #3498db;}
.r30{border-left:8px solid #2ecc71;}
.r90{border-left:8px solid #9b59b6;}
.simulado{border-left:8px solid #111;}

.total{
font-size:20px;
margin:25px 0;
font-weight:bold;
text-align:center;
}

</style>
</head>

<body>

<h1>PROJETO LETI RESIDENTE 2027</h1>

<label>Escolha a data atual:</label>
<input type="date" id="dataEscolhida">
<button onclick="calcular()">CALCULAR</button>

<div id="saida"></div>

<div id="metaResumo"></div>

<script>

const META_SEMANAL = 350;

const MINIMO = {
FIX:60,
R7:20,
R15:15,
R30:10,
R90:10
};

const SEM_AULA = ["2026-02-14"];

const DATA_INICIO = new Date(2026,0,10);

function parseDateLocal(d){
const p=d.split("-");
return new Date(p[0],p[1]-1,p[2]);
}

function inicioSabado(data){
let d=new Date(data);
let diff=(d.getDay()-6+7)%7;
d.setDate(d.getDate()-diff);
d.setHours(0,0,0,0);
return d;
}

/* semana REAL do curso (ignora carnaval) */
function semanaCurso(data){

let sabadoAtual=inicioSabado(data);
let contador=0;

for(let d=new Date(DATA_INICIO); d<=sabadoAtual; d.setDate(d.getDate()+7)){

let iso=d.toISOString().split("T")[0];

if(!SEM_AULA.includes(iso)){
contador++;
}
}

return contador;
}

/* pega o sábado válido (se carnaval, volta um) */
function sabadoValido(data){

let sab=inicioSabado(data);

while(SEM_AULA.includes(sab.toISOString().split("T")[0])){
sab.setDate(sab.getDate()-7);
}

return sab;
}

const aulas=[
["2026-01-10","SD ICTERICIA I (HEPATITES)"],
["2026-01-10","DOENCAS EXANTEMATICAS"],
["2026-01-17","SD ICTERICIA II (VIAS BILIARES)"],
["2026-01-17","SINDROME DE HIPERTENSAO PORTA"],
["2026-01-24","SINDROME DE INSUFICIENCIA HEPATICA"],
["2026-01-24","SINDROMES DE TRANSMISSAO SEXUAL"],
["2026-01-31","SINDROMES DISFAGICAS"],
["2026-01-31","SINDROMES RESPIRATORIAS NA INFANCIA (PARTE 1)"],
["2026-02-07","SINDROME DISPEPTICA E DOENCAS DO TGI SUPERIOR"],
["2026-02-07","SINDROMES RESPIRATORIAS NA INFANCIA (PARTE II)"],
["2026-02-14","SINDROME DIARREICA"],
["2026-02-14","HEMORRAGIA DIGESTIVA I - ABORDAGEM E CONDUTA"],
["2026-02-21","SINDROME METABOLICA I - HAS E DISLIPIDEMIA"],
["2026-02-21","HEMORRAGIA DIGESTIVA II - PROCTOLOGIA"],
["2026-02-28","SUS - EVOLUCAO HISTORICA, DIRETRIZES, PROPOSTAS E FINANCIAMENTO"],
["2026-02-28","SANGRAMENTO DA PRIMEIRA METADE DA GRAVIDEZ E DOENCAS HEMOLITICAS PERINATAIS"],
["2026-03-07","SINDROME ALGICA I - DOR ABDOMINAL"],
["2026-03-07","SANGRAMENTOS DA SEGUNDA METADE DA GRAVIDEZ"],
["2026-03-14","SINDROME METABOLICA II - DIABETES"],
["2026-03-14","IMUNIZACAO + INFECCAO DO TRATO URINARIO"],
["2026-03-21","GRANDES SINDROMES ENDOCRINAS PARTE I (TIREOIDE)"],
["2026-03-21","SINDROME DE OCLUSAO INTESTINAL (AGUDA X CRONICA) + HERNIAS"],
["2026-03-28","GRANDES SINDROMES ENDOCRINAS PARTE II (SUPRARRENAL/CALCIO); HIPOFUNCAO ADRENAL (DOENCA DE ADDISON)"],
["2026-03-28","ONCOLOGIA PARTE I - MAMA E OVARIO"],
["2026-04-04","TERAPIA INTENSIVA"],
["2026-04-04","MEDIDAS DE SAUDE COLETIVA"],
["2026-04-11","GRANDES SINDROMES BACTERIANAS PARTE I - PNEUMONIA"],
["2026-04-11","ONCOLOGIA PARTE II (ENDOMETRIO E COLO UTERINO)"],
["2026-04-18","ESTUDOS EPIDEMIOLOGICOS"],
["2026-04-18","DOENCAS CLINICAS NA GRAVIDEZ"],
["2026-04-25","GRANDES SINDROMES BACTERIANAS PARTE II - ENDOCARDITE E ITU"],
["2026-04-25","SINDROMES DE IMUNODEFICIENCIA"],
["2026-05-02","SINDROMES FEBRIS"],
["2026-05-09","TOSSE CRONICA"],
["2026-05-09","NEONATOLOGIA I"],
["2026-05-16","NEONATOLOGIA II"],
["2026-05-16","ONCOLOGIA II - ESOFAGO, ESTOMAGO, COLORRETAL E FIGADO"],
["2026-05-23","ONCOLOGIA II - PROSTATA, PULMAO E TIREOIDE"],
["2026-05-23","CRESCIMENTO E SEUS DISTURBIOS"],
["2026-05-23","CARENCIA DE MICRONUTRIENTES"],
["2026-05-30","PUBERDADE E SEUS DISTURBIOS"],
["2026-05-30","DESENVOLVIMENTO INFANTIL"],
["2026-06-06","DISPNEIA (DOENCAS VASCULARES, OBSTRUTIVAS E RESTRITIVAS)"],
["2026-06-06","SOFRIMENTO FETAL, AVALIACAO DE VITALIDADE FETAL, FORCEPS E PUERPERIO"],
["2026-06-13","GERIATRIA"],
["2026-06-13","EPILEPSIA"],
["2026-06-20","VIGILANCIA DA SAUDE E ETICA MEDICA"],
["2026-06-20","SINDROMES NEUROVASCULARES"],
["2026-06-27","DECLARACAO DE OBITO E SAUDE DO TRABALHADOR"],
["2026-06-27","FRAQUEZA MUSCULAR"],
["2026-07-04","DIAGNOSTICO DE GRAVIDEZ, MODIFICACOES DO ORGANISMO MATERNO, PRE-NATAL E ACONSELHAMENTO GENETICO"],
["2026-07-04","SINDROME ALGICA II - CEFALEIAS PRIMARIAS E SECUNDARIAS (ARTERITE DE CELULAS GIGANTES E MENINGITE)"],
["2026-07-11","CICLO MENSTRUAL, DISTOPIA GENITAL E INCONTINENCIA URINARIA"],
["2026-07-11","SINDROMES GLOMERULARES E DOENCA VASCULAR RENAL"],
["2026-07-18","SINDROMES ALGICAS III - DOR LOMBAR"],
["2026-07-18","SINDROME UREMICA"],
["2026-07-25","TRAUMA E SUAS CONSEQUENCIAS I"],
["2026-07-25","DISTURBIOS HIDROELETROLITICOS E ACIDO-BASE"],
["2026-08-01","TRAUMA E SUAS CONSEQUENCIAS II"],
["2026-08-01","ANEMIAS - PARTE I (CARENCIAIS)"],
["2026-08-08","ANEMIAS - PARTE II (HEMOLITICAS)"],
["2026-08-08","LEUCEMIAS E PANCITOPENIA"],
["2026-08-15","AMENORREIA"],
["2026-08-15","INFERTILIDADE E CLIMATERIO"],
["2026-08-22","LINFONODOMEGALIA"],
["2026-08-22","ANTICONCEPCAO, SANGRAMENTOS GINECOLOGICOS E ENDOMETRIOSE"],
["2026-08-29","DISTURBIOS DE HEMOSTASIA"],
["2026-08-29","TRANSTORNOS PSIQUIATRICOS I"],
["2026-09-05","ARTRITES"],
["2026-09-05","TRANSTORNOS PSIQUIATRICOS II"],
["2026-09-12","COLAGENOSES"],
["2026-09-12","VASCULITES"],
["2026-09-19","SINDROMES EDEMIGENICAS"],
["2026-09-19","O PARTO"],
["2026-09-26","SINDROMES ALGICAS IV - DOR TORACICA PARTE I"],
["2026-09-26","SINDROMES ALGICAS IV - DOR TORACICA PARTE II"],
["2026-10-03","TAQUIARRITMIAS"],
["2026-10-03","BRADIARRITMIAS"],
["2026-10-10","VALVOPATIAS"],
["2026-10-10","CARDIOPEDIATRIA"],
["2026-10-17","ALEITAMENTO MATERNO + DIARREIA AGUDA"],
["2026-10-17","PERIOPERATORIO I"],
["2026-10-24","PERIOPERATORIO II"],
["2026-10-24","INTOXICACAO E ACIDENTES POR ANIMAIS PEÇONHENTOS"],
["2026-10-31","PSIQUIATRIA I"],
["2026-10-31","PSIQUIATRIA II"],
["2026-11-07","OTORRINOLARINGOLOGIA"],
["2026-11-07","CIRURGIA DE CABECA E PESCOCO"],
["2026-11-14","OFTALMOLOGIA"],
["2026-11-14","ESPECIALIDADE CIRURGICA - PARTE I"],
["2026-11-14","ESPECIALIDADE CIRURGICA - PARTE II"],
["2026-11-14","DERMATOLOGIA I"],
["2026-11-14","DERMATOLOGIA II"],
["2026-11-14","ORTOPEDIA I"],
["2026-11-14","ORTOPEDIA II"]
];

/* ordenar fases */
const ordem=["FIX","R7","R15","R30","R90"];

function calcular(){

const dataInput=document.getElementById("dataEscolhida").value;
if(!dataInput)return alert("Escolha uma data");

const data=parseDateLocal(dataInput);
const sabado=sabadoValido(data);
const semana=semanaCurso(data);

let ativos=[];

/* detectar sábado/domingo */
if(data.getDay()===6 || data.getDay()===0){

const temas=aulas.filter(a=>a[0]===sabado.toISOString().split("T")[0]);

let html=`<div class="total">SEMANA ${semana}</div>`;

temas.forEach((t,i)=>{
html+=cardHTML(t[1],"FIX",i,60,60);
});

/* card simulado */
html+=`
<div class="card simulado">
<strong>SIMULADO COMPLETO</strong><br><br>
<input type="number" placeholder="TOTAL DE ERROS" oninput="this.nextElementSibling.innerText='ERROS: '+this.value">
<div>ERROS: -</div>
</div>
`;

document.getElementById("saida").innerHTML=html;
return;
}

/* fluxo normal */

aulas.forEach(a=>{

const dataAula=parseDateLocal(a[0]);
const sabAula=sabadoValido(dataAula);

let diff=(sabado - sabAula)/(1000*60*60*24*7);

if(diff===0)ativos.push({tema:a[1],fase:"FIX"});
if(diff===1)ativos.push({tema:a[1],fase:"R7"});
if(diff===2)ativos.push({tema:a[1],fase:"R15"});
if(diff===4)ativos.push({tema:a[1],fase:"R30"});
if(diff===12)ativos.push({tema:a[1],fase:"R90"});

});

/* ordenar */
ativos.sort((a,b)=>ordem.indexOf(a.fase)-ordem.indexOf(b.fase));

let totalMin=0;

ativos.forEach(x=>{
x.min=MINIMO[x.fase];
totalMin+=x.min;
});

/* distribuir até 350 */

ativos.forEach(x=>{
x.sugerida=Math.round((x.min/totalMin)*META_SEMANAL);
});

document.getElementById("metaResumo").innerHTML=
`Meta mínima: <strong>${totalMin}</strong> | Meta ideal: <strong>${META_SEMANAL}</strong>`;

let html=`<div class="total">SEMANA ${semana}</div>`;

ativos.forEach((x,i)=>{
html+=cardHTML(x.tema,x.fase,i,x.min,x.sugerida);
});

document.getElementById("saida").innerHTML=html;

}

/* template card */

function cardHTML(tema,fase,i,min,sug){
return`
<div class="card ${fase.toLowerCase()}" id="card${i}">
<strong>${tema}</strong><br><br>
FASE: ${fase}<br><br>
QUESTOES: ${min} / ${sug}

<input type="number" placeholder="QUANTAS FIZ">
<button onclick="toggle(${i})">FINALIZAR</button>
</div>`;
}

function toggle(i){

let c=document.getElementById("card"+i);
let b=c.querySelector("button");

if(c.classList.contains("finalizado")){
c.classList.remove("finalizado");
b.innerText="FINALIZAR";
}else{
c.classList.add("finalizado");
b.innerText="REABRIR";
}

}

</script>

</body>
</html>
